<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Zona Circular Vermelha com Dano</title>
<style>
  body, html {
    margin: 0;
    padding: 0;
    height: 100%;
    overflow: hidden;
    background-color: #ff0000; /* fundo vermelho */
    font-family: sans-serif;
  }

  #zona {
    position: fixed;
    top: 50%;
    left: 50%;
    width: 200vw;
    height: 200vw;
    background-color: #ff0000; /* vermelho */
    border-radius: 50%;
    transform: translate(-50%, -50%);
    overflow: hidden;
    pointer-events: none;
  }

  #centro {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 100vw; /* círculo inicial */
    height: 100vw;
    background-color: #e0e0e0; /* área segura */
    border-radius: 50%;
    transform: translate(-50%, -50%);
  }

  #vidaContainer {
    position: fixed;
    top: 10px;
    left: 10px;
    width: 150px;
    height: 20px;
    background: #555;
    border: 2px solid #222;
    border-radius: 5px;
  }

  #vidaBarra {
    width: 100%;
    height: 100%;
    background: green;
    border-radius: 3px;
    transition: width 0.3s ease;
  }

  #tanque {
    position: absolute;
    width: 50px;
    height: 50px;
    background: blue;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
  }
</style>
</head>
<body>

<div id="zona">
  <div id="centro"></div>
</div>

<div id="vidaContainer">
  <div id="vidaBarra"></div>
</div>

<div id="tanque"></div>

<script>
const centro = document.getElementById('centro');
const tanque = document.getElementById('tanque');
let size = 100; // tamanho inicial do círculo central em vw
const shrinkRate = 0.05; // velocidade de fechamento
const minSize = 5; // tamanho mínimo

let vida = 100;
const maxVida = 100;

// Atualiza a barra de vida
function atualizarVida() {
  const barra = document.getElementById('vidaBarra');
  barra.style.width = (vida / maxVida * 100) + '%';
  if(vida <= 0) {
    alert("Game Over!");
    vida = 0;
  }
}

// Função para reduzir tamanho do círculo
function animarZona() {
  if(size > minSize) {
    size -= shrinkRate;
    centro.style.width = size + 'vw';
    centro.style.height = size + 'vw';
  }
  requestAnimationFrame(animarZona);
}

// Verifica se o tanque está fora da zona segura
function verificarDano() {
  const rectTanque = tanque.getBoundingClientRect();
  const rectCentro = centro.getBoundingClientRect();

  const centroX = rectCentro.left + rectCentro.width/2;
  const centroY = rectCentro.top + rectCentro.height/2;

  const tanqueX = rectTanque.left + rectTanque.width/2;
  const tanqueY = rectTanque.top + rectTanque.height/2;

  const raio = rectCentro.width / 2;
  const dist = Math.hypot(centroX - tanqueX, centroY - tanqueY);

  if(dist > raio) {
    vida -= 0.2; // dano gradual
    if(vida < 0) vida = 0;
    atualizarVida();
  }

  requestAnimationFrame(verificarDano);
}

// Movimentação simples do tanque com setas
const teclas = {};
document.addEventListener('keydown', e => teclas[e.key] = true);
document.addEventListener('keyup', e => teclas[e.key] = false);

function moverTanque() {
  let x = parseFloat(tanque.style.left) || window.innerWidth/2;
  let y = parseFloat(tanque.style.top) || window.innerHeight/2;
  let speed = 2;

  if(teclas['ArrowUp']) y -= speed;
  if(teclas['ArrowDown']) y += speed;
  if(teclas['ArrowLeft']) x -= speed;
  if(teclas['ArrowRight']) x += speed;

  x = Math.max(0, Math.min(window.innerWidth, x));
  y = Math.max(0, Math.min(window.innerHeight, y));

  tanque.style.left = x + 'px';
  tanque.style.top = y + 'px';

  requestAnimationFrame(moverTanque);
}

// Inicia animação
animarZona();
verificarDano();
moverTanque();
atualizarVida();
</script>

</body>
</html>
